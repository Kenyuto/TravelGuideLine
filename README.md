<<<<<<< HEAD
# TravelGuideLine
=======
# TravelGuideLine - 旅遊行程檢視網站

## 專案簡介

TravelGuideLine 是一個輕量級的旅遊行程檢視網站，可從 Google Sheet 直接讀取行程資料並以卡片式 UI 呈現。專為行動裝置與桌機優化，支援免費部署平台（GitHub Pages / Cloudflare Pages / Vercel）。

## 核心功能

### � 登入驗證（P0 優先級）— 安全門檻
- 預設首頁為登入頁面，顯示行程簡介與密碼輸入框
- 從 Google Sheet 「登入設定」頁籤讀取密碼清單
- 支援多組密碼，每組可有獨立說明文字（如：「家庭旅遊 2024」、「公司團建行程」）
- 密碼可設定有效期限（YYYY-MM-DD 格式），過期密碼自動失效
- 登入狀態保留 7 天（可設定），過期需重新登入
- 密碼錯誤：無限次重試，無鎖定機制，立即顯示錯誤訊息
- 提供登出按鈕（設定選單或使用者下拉選單），清除登入狀態
- 深連結整合：未登入時先顯示登入頁，登入後自動跳轉目標頁面
- **保護隱私**：僅授權人員可查看行程內容，未登入無法存取

### �📅 每日行程檢視（P1 優先級）
- 以卡片式呈現每日景點、餐廳、交通、住宿資訊
- 含 Emoji 視覺化與一致排版
- 支援左右滑動或頁籤切換不同日期
- RWD 響應式設計：手機、平板、桌機皆清晰顯示（含橫直向）

### 🔍 搜尋與過濾（P2 優先級）
- 關鍵字搜尋快速定位目標資訊（即時搜尋，300ms 防抖）
- 分類過濾：景點／餐廳／交通／住宿
- 標籤過濾：必訪、美食推薦、親子友善等（多標籤 OR 邏輯）
- 保留日期切換功能於過濾狀態

### 🧳 旅遊資訊（P2 優先級）
- 獨立頁籤顯示行程外的補充資訊
- **攜帶物品清單**：支援勾選已準備項目，狀態保存於本地
- **注意事項**：旅遊提醒、風險警示、文化禮儀等
- **緊急聯絡人**：旅伴、導遊、飯店、大使館等聯絡資訊
- **預算總覽**：事前規劃預算（獨立管理，不與行程費用自動比對）
- 分類過濾快速定位目標資訊
- 排序權重自訂顯示順序

### 🔗 分享與深連結（P3 優先級）
- 支援網址參數直接開啟特定日期或行程卡片
- 格式：`?date=YYYY-MM-DD&item=<slug>`
- 可僅提供日期或卡片 slug，系統自動推導
- 深連結與登入整合：未登入時先驗證身份，登入後自動導向目標

### 🖼️ 圖片與多媒體
- 行程卡片支援圖片縮圖／連結
- 載入中占位、失敗替代圖
- Lazy Load 與基本快取策略
- 參考連結列表（官網、訂票連結、遊記），新分頁開啟
- 評分資訊顯示（星級或數值 + 評分來源）

### 📍 詳細資訊欄位
- **景點**：位置、營業時間、費用、電話、評分、標籤
- **餐廳**：位置、營業時間、餐廳時段（早餐🌅／午餐☀️／晚餐🌙）、電話、Google Maps 連結、費用、評分
- **交通**：交通工具類型、車次、座位號、費用、起訖時間
- **住宿**：房型、入住／退房時間、地址、電話、費用、預約狀態
- 動態顯示：根據分類自動顯示相關欄位

### 📡 資料來源與更新
- 從公開可讀 Google Sheet 直接取用（CSV/JSON）
- **登入設定**：從「登入設定」或「AuthConfig」頁籤讀取密碼清單
  - 欄位：密碼（必填）、說明文字（選填，每組密碼可獨立說明）、有效期限（選填，YYYY-MM-DD）
- **行程資料**：從「行程」或「Itinerary」工作表讀取每日行程
- **旅遊資訊**：從「旅遊資訊」或「TravelInfo」工作表讀取補充資訊
- 版本化欄位映射表確保欄位變動不破版
- 快取機制與手動重新整理支援
- 未知欄位寬鬆解析並記錄告警

### ⚡ 效能與離線體驗
- 首次載入：桌機 <2 秒、行動裝置 <3 秒
- 日期切換：<1 秒
- PWA 基礎快取：CSS、JS、字型、首屏必要 JSON
- 版本化快取名稱避免舊資源殘留

### 🌐 SEO 與分享
- 基礎 Open Graph + meta（title/description/image）
- 友善的社群分享預覽
- 結構化資料與站點地圖可於後續升級

### 🎨 使用者體驗
- Loading 狀態指示
- 錯誤場景友善提示與重試入口
- 字體最小值確保小螢幕可讀性
- 一致的術語與回饋訊息

## 技術特點

### 資料架構
- **AuthConfig**：登入設定（密碼項目列表、最後更新時間）
- **AuthItem**：單一密碼項目（密碼、說明文字、有效期限、有效性計算）
- **ItineraryDay**：每日行程容器（日期、卡片列表、備註）
- **ItineraryItem**：單一行程卡片（標題、分類、時間段、位置、費用、備註、Emoji、圖片）
- **TravelInfo**：旅遊資訊整體資料（資訊項目列表、最後更新時間）
- **InfoItem**：單一旅遊資訊項目（標題、分類、內容、Emoji、排序權重）

### 部署與安全
- 無後端／純前端運算
- 免費部署平台相容（GitHub Pages / Cloudflare Pages / Vercel）
- 公開可讀 Google Sheet，無金鑰暴露風險
- 只讀方式安全取用資料

### 容錯與擴展
- 版本化欄位映射表應對 Google Sheet 欄位異動
- 寬鬆解析策略：未知欄位忽略並記錄告警
- 大量資料分頁或惰性載入
- 映射版本升級流程（詳見實作計畫）

## 成功準則

### 登入驗證
- **SC-012**：未登入使用者開啟網站時，可在 2 秒內看到登入頁面（包含行程說明與密碼輸入框）
- **SC-013**：使用者輸入正確密碼後，可在 1 秒內完成驗證並進入行程內容頁面
- **SC-014**：使用者輸入錯誤密碼後，可在 500ms 內看到明確的錯誤訊息（「密碼錯誤，請重新輸入」）
- **SC-015**：登入狀態於 7 天內保持有效，使用者重新開啟網站時無需重新輸入密碼；超過 7 天後登入狀態自動過期

### 行程檢視
- **SC-001**：首次載入主頁在常見桌機網路下可於 2 秒內完成可視內容渲染；行動裝置 3 秒內
- **SC-002**：使用者可在 1 秒內完成日期切換並看到對應行程卡片
- **SC-003**：90% 使用者能在首次使用時成功找到目標日期並瀏覽卡片內容
- **SC-004**：行程資料更新後，使用者在 5 分鐘內可透過快取更新或重新整理看到最新內容
- **SC-005**：錯誤場景下顯示明確訊息與重試入口；相關回報（支持訊息）低於初期每月 5 件
- **SC-006**：含圖片的行程卡片在常見網路下可於 3 秒內顯示首張圖片縮圖；圖片載入失敗時顯示替代圖而不影響卡片其他資訊瀏覽

### 旅遊資訊
- **SC-010**：使用者可在 2 次點擊內切換至「旅遊資訊」頁籤並查看分類清單
- **SC-011**：物品清單項目勾選後立即反映於視覺（如：打勾圖示、劃線），並於下次載入時保留狀態

## 專案結構

```
TravelGuideLine/
├── .github/               # GitHub Actions / Prompts / Agents
├── .specify/              # SpecKit 規格管理工具
│   ├── memory/           # 憲章與專案記憶
│   ├── scripts/          # PowerShell 自動化腳本
│   └── templates/        # 規格、計畫、任務範本
├── specs/                # 功能規格文件
│   └── 001-itinerary-view/
│       └── spec.md       # 旅遊行程檢視網站規格（zh-TW）
└── README.md             # 本文件
```

## 開發流程

本專案採用 SpecKit 規格驅動開發流程：

1. **規格定義**（`/speckit.specify`）：定義使用者故事、需求、成功準則（zh-TW）
2. **釐清問答**（`/speckit.clarify`）：確認技術決策與邊界情境（已完成 5 題）
3. **實作計畫**（`/speckit.plan`）：技術脈絡、資料模型、契約設計
4. **任務拆解**（`/speckit.tasks`）：按使用者故事拆解可獨立測試的任務
5. **實作執行**（`/speckit.implement`）：TDD 驅動的迭代開發

## 憲章遵循

本專案遵循 [TravelGuideLine Constitution v1.1.0](.specify/memory/constitution.md)：

- **代碼品質**：零錯誤 linting、自動格式化、型別註解、程式碼審查
- **測試標準**：TDD 推薦、單元測試、契約測試、整合測試覆蓋關鍵流程
- **使用者體驗一致性**：術語統一、錯誤可操作、無障礙考量
- **效能要求**：p95 延遲預算、進度回饋、CI 效能檢查
- **簡潔與變更管理**：語義化版本、遷移說明、優先最簡方案
- **文件語言政策**：所有規格、計畫、使用者文件以繁體中文（zh-TW）撰寫

## 釐清決策

### Session 2025-12-05（核心功能）
1. **資料來源策略**：公開可讀 Google Sheet，前端 CSV/JSON 直連（無金鑰）
2. **欄位變動容錯**：版本化映射表 + 寬鬆解析，未知欄位忽略並告警
3. **PWA 快取範圍**：CSS/JS/字型 + 首屏必要 JSON
4. **SEO 層級**：基礎 Open Graph + meta（title/description/image）
5. **深連結格式**：`?date=YYYY-MM-DD&item=<slug>`（支援僅日期或卡片）
6. **首次進入日期**：當日行程（若存在），否則行程第一天
7. **搜尋模式**：即時搜尋（300ms 防抖）
8. **標籤過濾邏輯**：多標籤 OR 邏輯（任一符合即顯示）
9. **離線模式**：允許查看快取資料，顯示「離線模式」橫幅提示
10. **旅遊資訊來源**：同一 Google Sheet 獨立工作表（預設「旅遊資訊」或「TravelInfo」）
11. **預算與行程費用**：獨立管理，不自動比對

### Session 2025-12-06（登入驗證）
1. **登入狀態持久性**：保留 7 天（可設定），過期需重新登入
2. **密碼錯誤處理**：立即顯示錯誤訊息，無限次重試（無鎖定機制）
3. **Google Sheet 密碼頁籤**：單一頁籤「登入設定」，每組密碼有獨立說明
   - 欄位：密碼（必填）、說明文字（選填）、有效期限（選填，YYYY-MM-DD）

## 授權

待定義

## 聯絡

待定義
>>>>>>> 001-itinerary-view

# TravelGuideLine - 旅遊行程檢視網站

## 專案簡介

TravelGuideLine 是一個輕量級的旅遊行程檢視網站，可從 Google Sheet 直接讀取行程資料並以卡片式 UI 呈現。專為行動裝置與桌機優化，支援免費部署平台（GitHub Pages / Cloudflare Pages / Vercel）。

## 核心功能

### 🔐 登入驗證（P0 優先級）— 安全門檻
- 預設首頁為登入頁面，顯示行程簡介與密碼輸入框
- 從 Google Sheet 「登入設定」頁籤讀取密碼清單
- 支援多組密碼，每組可有獨立說明文字（如：「家庭旅遊 2024」、「公司團建行程」）
- 密碼可設定有效期限（YYYY-MM-DD 格式），過期密碼自動失效
- 登入狀態保留 7 天（可設定），過期需重新登入
- 密碼錯誤：無限次重試，無鎖定機制，立即顯示錯誤訊息
- 提供登出按鈕（設定選單或使用者下拉選單），清除登入狀態
- 深連結整合：未登入時先顯示登入頁，登入後自動跳轉目標頁面
- **保護隱私**：僅授權人員可查看行程內容，未登入無法存取
- **年長者友善模式**：特定密碼登入後自動啟用大字體、高對比度、易操作的介面設計

### �📅 每日行程檢視（P1 優先級）
- 以卡片式呈現每日景點、餐廳、交通、住宿資訊
- 含 Emoji 視覺化與一致排版
- 支援左右滑動或頁籤切換不同日期
- RWD 響應式設計：手機、平板、桌機皆清晰顯示（含橫直向）

### 🔍 搜尋與過濾（P2 優先級）
- 關鍵字搜尋快速定位目標資訊（即時搜尋，300ms 防抖）
- 分類過濾：景點／餐廳／交通／住宿
- 標籤過濾：必訪、美食推薦、親子友善等（多標籤 OR 邏輯）
- 保留日期切換功能於過濾狀態

### 🧳 旅遊資訊（P2 優先級）
- 獨立頁籤顯示行程外的補充資訊
- **攜帶物品清單**：支援勾選已準備項目，狀態保存於本地
- **注意事項**：旅遊提醒、風險警示、文化禮儀等
- **緊急聯絡人**：旅伴、導遊、飯店、大使館等聯絡資訊
- **預算總覽**：事前規劃預算（獨立管理，不與行程費用自動比對）
- 分類過濾快速定位目標資訊
- 排序權重自訂顯示順序

### 🔗 分享與深連結（P3 優先級）
- 支援網址參數直接開啟特定日期或行程卡片
- 格式：`?date=YYYY-MM-DD&item=<slug>`
- 可僅提供日期或卡片 slug，系統自動推導
- 深連結與登入整合：未登入時先驗證身份，登入後自動導向目標

### 🖼️ 圖片與多媒體
- 行程卡片支援圖片縮圖／連結
- 載入中占位、失敗替代圖
- Lazy Load 與基本快取策略
- 參考連結列表（官網、訂票連結、遊記），新分頁開啟
- 評分資訊顯示（星級或數值 + 評分來源）

### 📍 詳細資訊欄位
- **景點**：位置、營業時間、費用、電話、評分、標籤
- **餐廳**：位置、營業時間、餐廳時段（早餐🌅／午餐☀️／晚餐🌙）、電話、Google Maps 連結、費用、評分
- **交通**：交通工具類型、車次、座位號、費用、起訖時間
- **住宿**：房型、入住／退房時間、地址、電話、費用、預約狀態
- 動態顯示：根據分類自動顯示相關欄位

### 📡 資料來源與更新
- 從公開可讀 Google Sheet 直接取用（CSV/JSON）
- **登入設定**：從「登入設定」或「AuthConfig」頁籤讀取密碼清單
  - 欄位：
    - 密碼（必填）
    - 說明文字（選填，每組密碼可獨立說明）
    - 有效期限（選填，YYYY-MM-DD）
    - 年長者模式（選填，true/1/yes/是 啟用年長者友善介面）
- **行程資料**：從「行程」或「Itinerary」工作表讀取每日行程
  - 新增欄位：
    - 卡片顏色（選填，CSS 顏色值如 #FFE5E5、rgb(255, 229, 229)、pink）
    - 卡片背景圖片（選填，圖片 URL）
- **旅遊資訊**：從「旅遊資訊」或「TravelInfo」工作表讀取補充資訊
- 版本化欄位映射表確保欄位變動不破版
- 快取機制與手動重新整理支援
- 未知欄位寬鬆解析並記錄告警

### ⚡ 效能與離線體驗
- 首次載入：桌機 <2 秒、行動裝置 <3 秒
- 日期切換：<1 秒
- PWA 基礎快取：CSS、JS、字型、首屏必要 JSON
- 版本化快取名稱避免舊資源殘留

### 🌐 SEO 與分享
- 基礎 Open Graph + meta（title/description/image）
- 友善的社群分享預覽
- 結構化資料與站點地圖可於後續升級

### 🎨 使用者體驗
- Loading 狀態指示
- 錯誤場景友善提示與重試入口
- 字體最小值確保小螢幕可讀性
- 一致的術語與回饋訊息

### 👴 年長者友善設計
當使用標記為「年長者模式」的密碼登入後，系統自動啟用以下優化：
- **字體放大**：基礎字體 18px，標題 24-32px，確保清晰易讀
- **行距加大**：行高 1.6 倍，段落間距增加
- **按鈕優化**：所有可點擊元素最小 44×44 像素，避免誤觸
- **對比度增強**：文字與背景對比度達 4.5:1 以上，邊框加粗
- **操作回饋**：按鈕點擊時有明顯視覺回饋（放大/縮小效果）
- **減少動畫**：動畫時間縮短，避免認知負擔
- **簡化佈局**：增加留白，避免畫面壅擠
- **粗體文字**：重要資訊使用粗體，增加辨識度
- **連結加粗下劃線**：連結使用 2px 下劃線，易於識別

### 🎨 卡片視覺客製化
行程卡片支援豐富的視覺客製化選項：
- **自訂顏色**：為不同類型的行程設定專屬背景顏色（如：景點用藍色、美食用橙色）
- **背景圖片**：支援網路圖片 URL，打造更生動的視覺體驗
- **優先級**：背景圖片優先於顏色顯示
- **完成狀態**：已完成的行程會顯示綠色邊框和半透明背景

## 技術特點

### 資料架構
- **AuthConfig**：登入設定（密碼項目列表、最後更新時間）
- **AuthItem**：單一密碼項目（密碼、說明文字、有效期限、年長者模式標記、有效性計算）
- **ItineraryDay**：每日行程容器（日期、卡片列表、備註）
- **ItineraryItem**：單一行程卡片（標題、分類、時間段、位置、費用、備註、Emoji、圖片、卡片顏色、卡片背景圖片）
- **TravelInfo**：旅遊資訊整體資料（資訊項目列表、最後更新時間）
- **InfoItem**：單一旅遊資訊項目（標題、分類、內容、Emoji、排序權重）

### 部署與安全
- 無後端／純前端運算
- 免費部署平台相容（GitHub Pages / Cloudflare Pages / Vercel）
- 公開可讀 Google Sheet，無金鑰暴露風險
- 只讀方式安全取用資料

### 容錯與擴展
- 版本化欄位映射表應對 Google Sheet 欄位異動
- 寬鬆解析策略：未知欄位忽略並記錄告警
- 大量資料分頁或惰性載入
- 映射版本升級流程（詳見實作計畫）

## Google Sheet 欄位設定指南

### 登入設定頁籤（必要）
| 欄位名稱 | 必填 | 說明 | 範例 |
|---------|------|------|------|
| 密碼 | ✅ | 登入密碼 | `travel2024` |
| 說明文字 | ❌ | 密碼用途說明 | `家庭旅遊` |
| 有效期限 | ❌ | YYYY-MM-DD 格式 | `2024-12-31` |
| 年長者模式 | ❌ | true/1/yes/是 啟用 | `true` |

### 行程頁籤（必要）
| 欄位名稱 | 必填 | 說明 | 範例 |
|---------|------|------|------|
| 日期 | ✅ | YYYY-MM-DD 格式 | `2024-12-15` |
| 標題 | ✅ | 行程名稱 | `台北 101` |
| 類別 | ❌ | 景點/美食/交通/住宿 | `景點` |
| 時間 | ❌ | HH:mm 格式 | `09:30` |
| 地點 | ❌ | 地點名稱 | `信義區` |
| Google Maps | ❌ | 地圖連結 | `https://maps.google.com/...` |
| 花費 | ❌ | 數字 | `500` |
| 幣別 | ❌ | 貨幣代碼 | `TWD` |
| 說明 | ❌ | 詳細說明 | `必訪景點` |
| 連結 | ❌ | 多個用逗號分隔 | `https://...` |
| 標籤 | ❌ | 多個用逗號分隔 | `親子友善,室內` |
| 備註 | ❌ | 額外提醒 | `需提前預約` |
| 卡片顏色 | ❌ | CSS 顏色值 | `#FFE5E5` |
| 卡片背景圖片 | ❌ | 圖片 URL | `https://...` |

## 使用範例

### 設定年長者友善登入
在 Google Sheet「登入設定」頁籤中：
```
密碼        | 說明文字   | 有效期限    | 年長者模式
grandpa123  | 爺爺奶奶用  | 2025-12-31  | true
family2024  | 家人共用   | 2025-12-31  | 
```

### 設定彩色行程卡片
在 Google Sheet「行程」頁籤中：
```
日期         | 標題      | 類別 | 卡片顏色      | 卡片背景圖片
2024-12-15  | 台北101   | 景點 | #E3F2FD       |
2024-12-15  | 鼎泰豐    | 美食 | #FFF3E0       |
2024-12-15  | 陽明山    | 景點 |               | https://example.com/yangming.jpg
```

## 授權

MIT License

## 聯絡

如有問題或建議，歡迎提交 Issue
